---
- name: Install basic apps in the system
  become: true
  dnf:
    state: present
    name: "{{ item }}"
    update_cache: true
  loop: "{{ base_apps }}"
  tags:
    - base_apps

- name: Install desktop tools
  become: true
  dnf:
    state: present
    name: '{{ item }}'
    update_cache: true
  loop: '{{ desktop_tools }}'
  tags:
    - desktop
    - desktop-tools

- name: Install desktop apps
  become: true
  dnf:
    state: present
    name: '{{ item }}'
    update_cache: true
  loop: '{{ desktop_apps }}'
  tags:
    - desktop
    - desktop-apps
    - non-third-party

- name: Create Symbolic Link for snapd
  become: true
  file:
    src: /var/lib/snapd/snap
    dest: /snap
    owner: root
    group: root
    state: link
  tags:
    - desktop
    - desktop-tools
    - snapd-link

- name: Install "Utube" with option --classic
  community.general.snap:
    name: utube
    classic: true
  tags:
    - desktop
    - desktop-apps
    - utube

- name: Install zPrezto
  script: files/installPrezto.sh
  tags:
    - desktop
    - shell-plugins
    - prezto

- name: Install Vivaldi Browser
  become: true
  dnf:
    name: "https://downloads.vivaldi.com/stable/vivaldi-stable-{{ vivaldi_version }}.x86_64.rpm"
    state: present
    update_cache: true
    disable_gpg_check: true
  tags:
    - desktop
    - desktop-apps
    - vivaldi

- name: Install Atom editor
  become: true
  dnf:
    name: "https://atom.io/download/rpm"
    state: present
    update_cache: true
    disable_gpg_check: true
  tags:
    - desktop
    - desktop-apps
    - atom

- name: Install BoostNote notepad
  become: true
  dnf:
    name: "https://github.com/BoostIO/BoostNote.next/releases/latest/download/boost-note-linux.rpm"
    state: present
    update_cache: true
    disable_gpg_check: true
  tags:
    - desktop
    - desktop-apps
    - boostnote

- name: Install GitKraken app
  become: true
  dnf:
    name: "https://release.gitkraken.com/linux/gitkraken-amd64.rpm"
    state: present
    update_cache: true
    disable_gpg_check: true
  tags:
    - desktop
    - desktop-apps
    - gitkraken

- name: Create "Applications" directory
  file:
    path: "{{ lookup('env', 'HOME') }}/Applications/"
    state: directory
    owner: "{{ lookup('env', 'USER') }}"
    group: "{{ lookup('env', 'USER') }}"
    mode: '0755'
  tags:
    - desktop
    - desktop-apps
    - apps_dir

- name: Download and unarchive Jetbrains Toolbox
  unarchive:
    src: https://download.jetbrains.com/toolbox/jetbrains-toolbox-1.19.7784.tar.gz
    dest: "{{ lookup('env', 'HOME') }}/Applications/"
    remote_src: true
  tags:
    - desktop
    - desktop-apps
    - toolbox

- name: Install Skype app
  become: true
  dnf:
    name: "https://go.skype.com/skypeforlinux-64.rpm"
    state: present
    update_cache: true
    disable_gpg_check: true
  tags:
    - desktop
    - desktop-apps
    - skype

- name: Install Slack app
  become: true
  dnf:
    name: files/slack-4.12.0-0.1.fc21.x86_64.rpm
    state: present
    update_cache: true
    disable_gpg_check: true
  tags:
    - desktop
    - desktop-apps
    - slack

- name: Install Zoom app
  become: true
  dnf:
    name: "https://zoom.us/client/latest/zoom_x86_64.rpm"
    state: present
    update_cache: true
    disable_gpg_check: true
  tags:
    - desktop
    - desktop-apps
    - zoom
